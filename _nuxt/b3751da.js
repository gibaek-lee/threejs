(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{445:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n(70);var r=n(125),o=n(443),c=n(451),l=n(448);function d(e){e.context;var t=e.isOrbitControl,n=void 0!==t&&t,d=Object(r.e)(null),h=Object(r.e)(null),f=Object(r.e)(null),v=Object(r.e)(null),w=Object(r.e)(null),canvas=Object(r.e)(void 0),y=Object(r.e)(null),m=Object(r.e)(null),O=Object(r.e)(null),j=Object(r.a)((function(){return{width:window.innerWidth,height:window.innerHeight}})),k=Object(r.a)((function(){return!!h.value&&!!y.value&&!!v.value}));Object(r.g)(canvas,(function(){S(),C()})),Object(r.d)((function(){window.addEventListener("resize",(function(){j.value.width=window.innerWidth,j.value.height=window.innerHeight,v.value&&(v.value.aspect=j.value.width/j.value.height,v.value.updateProjectionMatrix()),y.value&&(y.value.setSize(j.value.width,j.value.height),y.value.setPixelRatio(Math.min(window.devicePixelRatio,2)))}))}));var S=function(){h.value=new o.qb,f.value=new o.h(1),f.value.position.set(2.01,.01,2.01),v.value=new o.fb(75,j.value.width/j.value.height,.1,200),v.value.position.set(4,20,60),w.value=new o.Ab,y.value=new o.Gb({canvas:canvas.value}),y.value.setSize(j.value.width,j.value.height),y.value.setPixelRatio(Math.min(window.devicePixelRatio,2)),y.value.setClearColor("#262837"),n&&(m.value=new l.a(v.value,canvas.value),m.value.enableDamping=!0),O.value=new o.p},C=function(){d.value=new c.a({closed:!1,width:350}),d.value.parentSelector="div.dg.ac"};return{setCanvas:function(e){var t=e.vm,n=e.selectorCanvasId,r=void 0===n?"":n,o="canvas.webgl";r&&(o+=".".concat(r)),canvas.value=t.$el.querySelector(o)||void 0},registerRenderTickCanvas:function(e){var t=0,n=window.setInterval((function(){if(k.value)return e(),void window.clearInterval(n);t+=1,console.log("waiting UseWebgl init...",t),t>60&&(window.clearInterval(n),console.error("failed to init UseWebgl"))}),100)},canvas:canvas,gui:d,scene:h,renderer:y,axesHelper:f,cameraOrbit:v,orbitControl:m,windowSizes:j,clock:O,textureLoader:w}}},447:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));n(9);var r=n(443);function o(e){var t=e.scene,n=e.renderer,o=e.recieveMesh,c=e.castMeshs,l=e.light,d=e.isUseCameraHelper;n.shadowMap.enabled=!0,n.shadowMap.type=r.eb,o.receiveShadow=!0,c.forEach((function(e){e.castShadow=!0})),l.castShadow=!0,l.shadow.mapSize.width=1024,l.shadow.mapSize.height=1024,l.shadow.camera.near=1,l.shadow.camera.far=10;var h=null;d&&((h=new r.n(l.shadow.camera)).visible=!0,t.add(h));return{toggleVisiblePointLightCameraHelper:function(){h&&(h.visible=!h.visible)}}}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:16777215,intensity:.3},n=new r.a(t.color,t.intensity);return e.add(n),{ambientLight:n}}function l(e){var t=e.scene,n=new r.hb(16777215,.3);return n.position.set(1,1,1),t.add(n),{pointLight:n}}},453:function(e,t,n){"use strict";n(8),n(10),n(15),n(16);var r=n(3),o=(n(57),n(75),n(27),n(11),n(36),n(63),n(269),n(19),n(39),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(45),n(9),n(268),n(0)),c=n(88),l=n(1);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f=["sm","md","lg","xl"],v=["start","end","center"];function w(e,t){return f.reduce((function(n,r){return n[e+Object(l.r)(r)]=t(),n}),{})}var y=function(e){return[].concat(v,["baseline","stretch"]).includes(e)},m=w("align",(function(){return{type:String,default:null,validator:y}})),O=function(e){return[].concat(v,["space-between","space-around"]).includes(e)},j=w("justify",(function(){return{type:String,default:null,validator:O}})),k=function(e){return[].concat(v,["space-between","space-around","stretch"]).includes(e)},S=w("alignContent",(function(){return{type:String,default:null,validator:k}})),C={align:Object.keys(m),justify:Object.keys(j),alignContent:Object.keys(S)},W={align:"align",justify:"justify",alignContent:"align-content"};function x(e,t,n){var r=W[e];if(null!=n){if(t){var o=t.replace(e,"");r+="-".concat(o)}return(r+="-".concat(n)).toLowerCase()}}var P=new Map;t.a=o.default.extend({name:"v-row",functional:!0,props:h(h(h({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:y}},m),{},{justify:{type:String,default:null,validator:O}},j),{},{alignContent:{type:String,default:null,validator:k}},S),render:function(e,t){var n=t.props,data=t.data,o=t.children,l="";for(var d in n)l+=String(n[d]);var h=P.get(l);return h||function(){var e,t;for(t in h=[],C)C[t].forEach((function(e){var r=n[e],o=x(t,e,r);o&&h.push(o)}));h.push((e={"no-gutters":n.noGutters,"row--dense":n.dense},Object(r.a)(e,"align-".concat(n.align),n.align),Object(r.a)(e,"justify-".concat(n.justify),n.justify),Object(r.a)(e,"align-content-".concat(n.alignContent),n.alignContent),e)),P.set(l,h)}(),e(n.tag,Object(c.a)(data,{staticClass:"row",class:h}),o)}})},454:function(e,t,n){"use strict";n(8),n(10),n(15),n(16);var r=n(3),o=(n(30),n(11),n(36),n(63),n(269),n(19),n(39),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(45),n(57),n(9),n(71),n(268),n(0)),c=n(88),l=n(1);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f=["sm","md","lg","xl"],v=f.reduce((function(e,t){return e[t]={type:[Boolean,String,Number],default:!1},e}),{}),w=f.reduce((function(e,t){return e["offset"+Object(l.r)(t)]={type:[String,Number],default:null},e}),{}),y=f.reduce((function(e,t){return e["order"+Object(l.r)(t)]={type:[String,Number],default:null},e}),{}),m={col:Object.keys(v),offset:Object.keys(w),order:Object.keys(y)};function O(e,t,n){var r=e;if(null!=n&&!1!==n){if(t){var o=t.replace(e,"");r+="-".concat(o)}return"col"!==e||""!==n&&!0!==n?(r+="-".concat(n)).toLowerCase():r.toLowerCase()}}var j=new Map;t.a=o.default.extend({name:"v-col",functional:!0,props:h(h(h(h({cols:{type:[Boolean,String,Number],default:!1}},v),{},{offset:{type:[String,Number],default:null}},w),{},{order:{type:[String,Number],default:null}},y),{},{alignSelf:{type:String,default:null,validator:function(e){return["auto","start","end","center","baseline","stretch"].includes(e)}},tag:{type:String,default:"div"}}),render:function(e,t){var n=t.props,data=t.data,o=t.children,l=(t.parent,"");for(var d in n)l+=String(n[d]);var h=j.get(l);return h||function(){var e,t;for(t in h=[],m)m[t].forEach((function(e){var r=n[e],o=O(t,e,r);o&&h.push(o)}));var o=h.some((function(e){return e.startsWith("col-")}));h.push((e={col:!o||!n.cols},Object(r.a)(e,"col-".concat(n.cols),n.cols),Object(r.a)(e,"offset-".concat(n.offset),n.offset),Object(r.a)(e,"order-".concat(n.order),n.order),Object(r.a)(e,"align-self-".concat(n.alignSelf),n.alignSelf),e)),j.set(l,h)}(),e(n.tag,Object(c.a)(data,{class:h}),o)}})},472:function(e,t,n){var content=n(532);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(21).default)("8b7ac304",content,!0,{sourceMap:!1})},531:function(e,t,n){"use strict";n(472)},532:function(e,t,n){var r=n(20)(!1);r.push([e.i,".physics-engine-with-web-worker-container[data-v-79a9095d]{height:100%}.physics-engine-with-web-worker-container .col-controls[data-v-79a9095d]{flex-grow:unset}.physics-engine-with-web-worker-container .col-controls .color-change-box>div[data-v-79a9095d]{width:50px;height:50px}.physics-engine-with-web-worker-container .col-controls .color-change-box__red[data-v-79a9095d]{color:red}.physics-engine-with-web-worker-container .col-controls .color-change-box__green[data-v-79a9095d]{color:green}.physics-engine-with-web-worker-container .col-controls .color-change-box__blue[data-v-79a9095d]{color:#00f}.physics-engine-with-web-worker-container .col-canvas[data-v-79a9095d]{flex-grow:inherit;position:relative}",""]),e.exports=r},539:function(e,t,n){"use strict";n.r(t);n(10),n(9),n(70),n(27);var r=n(2),o=n(443);n(19);var c=n(445),l=n(33),d=n(49),h=(n(39),n(45),n(195),n(498),n(500),n(505),n(507),n(508),n(509),n(511),n(512),n(513),n(514),n(515),n(516),n(517),n(518),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),function(){function e(t){var n=t.N,dt=t.dt,r=t.physicsLibUrl,o=t.physicsWorldScript;Object(l.a)(this,e),this.N=n,this.dt=dt,this.sendTime=0,this.physicsLibUrl=r,this.physicsWorldScript=o,this.messageFromWorker={isWorldReady:!1,positions:void 0,quaternions:void 0},this.worker=new Worker(""),this.init()}return Object(d.a)(e,[{key:"init",value:function(){var e=this;this.createWorkerTagScript(),this.createWorker().then((function(){e.worker.postMessage(Object.assign({},{physicsLibUrl:e.physicsLibUrl})),e.worker.onmessage=function(t){var n=t.data,r=n.isWorldReady,o=n.positions,c=n.quaternions;e.messageFromWorker.isWorldReady=r,e.messageFromWorker.positions=o,e.messageFromWorker.quaternions=c}})).catch((function(e){window.console.log(e.message)}))}},{key:"createWorkerTagScript",value:function(){var e=document.createElement("script");e.setAttribute("id","worker"),e.setAttribute("type","javascript/worker"),e.text=this.physicsWorldScript,e.onload=function(){window.console.log("tagScript load success")},document.body.insertBefore(e,document.body.firstChild)}},{key:"createWorker",value:function(){var e=this;return new Promise((function(t,n){var r=document.querySelector("#worker");if(r){e.worker.terminate();var o=new Blob([r.textContent],{type:"text/javascript"}),c=new Worker(window.URL.createObjectURL(o));e.worker=c,t(!0)}else n(new Error("element id worker was not found"))}))}},{key:"sendDataToWorker",value:function(data){this.sendTime=Date.now();var t=data.physicsObjects.filter((function(e){return"SphereGeometry"===e})).length,n=new Float32Array(3*t),r=new Float32Array(4*t),o=1/data.timeSinceLastCalled;o-1/this.dt>e.THRESHOLD_FPS?window.console.log("Drop message. FPS difference: ",o-1/this.dt):this.messageFromWorker.isWorldReady?this.worker.postMessage(Object.assign({},{N:this.N,dt:this.dt,positions:n,quaternions:r},data),[n.buffer,r.buffer]):console.log("Phyics world is not ready")}}]),e}());h.THRESHOLD_FPS=80;var f=n(447),v=Object(r.d)({setup:function(e,t){var n=Object(c.a)({context:t,isOrbitControl:!0});return{setCanvas:n.setCanvas,registerRenderTickCanvas:n.registerRenderTickCanvas,gui:n.gui,scene:n.scene,renderer:n.renderer,axesHelper:n.axesHelper,cameraOrbit:n.cameraOrbit,orbitControl:n.orbitControl,windowSizes:n.windowSizes,clock:n.clock}},data:function(){return{idAnimationFrame:null,selectorCanvasWrap:"physics-engine-with-web-worker",iComposeWorker:null,oldElapsedTime:0,deltaTime:0,physicsObjects:[],debugObject:{}}},computed:{sphereMeshes:function(){return this.physicsObjects.filter((function(e){return"SphereGeometry"===e.geometry.type}))},messageFromWorker:function(){return this.iComposeWorker?this.iComposeWorker.messageFromWorker:{}}},watch:{messageFromWorker:{deep:!0,handler:function(e){var t=this,n=e.positions,r=e.quaternions;this.sphereMeshes.forEach((function(e,o){n&&e.position.set(n[3*o+0],n[3*o+1],n[3*o+2]),r&&e.quaternion.set(r[4*o+0],r[4*o+1],r[4*o+2],r[4*o+3]),t.scene.children.every((function(t){return t.uuid!==e.uuid}))&&t.scene.add(e)}))}}},mounted:function(){var e=this;this.setCanvas({vm:this}),this.registerRenderTickCanvas((function(){e.initUtils(),e.initWorkerPhysics(),e.setStyleDatGui(),e.tick();var t=window.setInterval((function(){e.physicsObjects.filter((function(e){return"SphereGeometry"===e.geometry.type})).length>=100?window.clearInterval(t):e.createSphereMesh()}),100)}))},beforeDestroy:function(){window.cancelAnimationFrame(this.idAnimationFrame),this.iComposeWorker.worker.terminate(),document.querySelector(this.gui.parentSelector).appendChild(this.gui.domElement),this.gui.destroy()},methods:{createSphereMesh:function(){var e=new o.T(new o.ub(.5,32,32),new o.W({metalness:.3,roughness:.4}));e.castShadow=!0,this.physicsObjects.push(e)},initUtils:function(){var e=new o.T(new o.gb(100,100),new o.W({color:"#777777",metalness:.3,roughness:.4}));e.rotation.x=.5*-Math.PI,this.scene.add(e),this.physicsObjects.push(e),this.debugObject.createSphereMesh=this.createSphereMesh,this.gui.add(this.debugObject,"createSphereMesh"),this.cameraOrbit.position.set(0,3,8);Object(f.a)(this.scene,{intensity:.7}).ambientLight;var t=Object(f.b)({scene:this.scene}).pointLight;t.position.y=5;Object(f.c)({scene:this.scene,renderer:this.renderer,recieveMesh:e,castMeshs:this.physicsObjects,light:t,isUseCameraHelper:!0}).toggleVisiblePointLightCameraHelper},initWorkerPhysics:function(){var e,t,n=this,r=document.location.origin;(e={url:"".concat(r,"/threejs/cannon/business/drop-bodies.js")},t=e.url,new Promise((function(e){var n=new XMLHttpRequest;n.open("GET",t,!1),n.onreadystatechange=function(){4===n.readyState&&(200!==n.status&&0!==n.status||e(n.responseText))},n.send(null)}))).then((function(e){var t,o,dt,c,l,d=(t={N:0,dt:1/60,physicsLibUrl:"".concat(r,"/threejs/cannon/build/cannon.js"),physicsWorldScript:e},o=t.N,dt=t.dt,c=t.physicsLibUrl,l=t.physicsWorldScript,{iComposeWorker:new h({N:o,dt:dt,physicsLibUrl:c,physicsWorldScript:l})}).iComposeWorker;n.iComposeWorker=d}))},sendDataToWorker:function(e){var t=this;if(null!==this.iComposeWorker){var n=1e3*this.iComposeWorker.dt-(Date.now()-this.iComposeWorker.sendTime);n>0&&(n=0),window.setTimeout((function(){t.iComposeWorker.sendDataToWorker({action:"step",timeSinceLastCalled:e,maxSubSteps:3,physicsObjects:t.physicsObjects.reduce((function(a,e){return a.concat(e.geometry.type)}),[])})}),n)}},tick:function(){var e=this.clock.getElapsedTime();this.deltaTime=e-this.oldElapsedTime,this.oldElapsedTime=e,this.physicsObjects.length>0&&this.sendDataToWorker(this.deltaTime),this.renderer.render(this.scene,this.cameraOrbit),this.orbitControl.update(),this.idAnimationFrame=window.requestAnimationFrame(this.tick)},setStyleDatGui:function(){this.gui.domElement.style.cssText+="position: absolute; right: 0px; top: 0px;",this.$el.querySelector(".".concat(this.selectorCanvasWrap)).appendChild(this.gui.domElement)}}}),w=(n(531),n(46)),y=n(58),m=n.n(y),O=n(454),j=n(453),component=Object(w.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{class:e.selectorCanvasWrap+"-container"},[n("v-col",{staticClass:"col-controls"},[n("div",{staticClass:"color-change-box"},[n("div",{staticClass:"color-change-box__red"}),e._v(" "),n("div",{staticClass:"color-change-box__green"}),e._v(" "),n("div",{staticClass:"color-change-box__blue"})])]),e._v(" "),n("v-col",{staticClass:"col-canvas",class:e.selectorCanvasWrap},[n("canvas",{staticClass:"webgl"})])],1)}),[],!1,null,"79a9095d",null);t.default=component.exports;m()(component,{VCol:O.a,VRow:j.a})}}]);