(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{445:function(e,n,t){"use strict";t.d(n,"a",(function(){return d}));t(70);var o=t(125),r=t(443),c=t(449),l=t(448);function d(e){e.context;var n=e.isOrbitControl,t=void 0!==n&&n,d=e.isPhysicallyCorrectLight,m=void 0!==d&&d,h=Object(o.e)(null),v=Object(o.e)(null),w=Object(o.e)(null),f=Object(o.e)(null),x=Object(o.e)(null),canvas=Object(o.e)(void 0),C=Object(o.e)(null),y=Object(o.e)(null),O=Object(o.e)(null),A=Object(o.a)((function(){return{width:window.innerWidth,height:window.innerHeight}})),k=Object(o.a)((function(){return!!v.value&&!!C.value&&!!f.value}));Object(o.g)(canvas,(function(){P(),j()})),Object(o.d)((function(){window.addEventListener("resize",(function(){A.value.width=window.innerWidth,A.value.height=window.innerHeight,f.value&&(f.value.aspect=A.value.width/A.value.height,f.value.updateProjectionMatrix()),C.value&&(C.value.setSize(A.value.width,A.value.height),C.value.setPixelRatio(Math.min(window.devicePixelRatio,2)))}))}));var P=function(){v.value=new r.wb,w.value=new r.i(1),w.value.position.set(2.01,.01,2.01),f.value=new r.kb(75,A.value.width/A.value.height,.1,200),f.value.position.set(4,20,60),x.value=new r.Gb,C.value=new r.Mb({canvas:canvas.value,antialias:!0}),C.value.setSize(A.value.width,A.value.height),C.value.setPixelRatio(Math.min(window.devicePixelRatio,2)),C.value.setClearColor("#262837"),C.value.physicallyCorrectLights=m,t&&(y.value=new l.a(f.value,canvas.value),y.value.enableDamping=!0),O.value=new r.r},j=function(){h.value=new c.a({closed:!1,width:350}),h.value.parentSelector="div.dg.ac"};return{setCanvas:function(e){var n=e.vm,t=e.selectorCanvasId,o=void 0===t?"":t,r="canvas.webgl";o&&(r+=".".concat(o)),canvas.value=n.$el.querySelector(r)||void 0},registerRenderTickCanvas:function(e){var n=0,t=window.setInterval((function(){if(k.value)return e(),void window.clearInterval(t);n+=1,console.log("waiting UseWebgl init...",n),n>60&&(window.clearInterval(t),console.error("failed to init UseWebgl"))}),100)},canvas:canvas,gui:h,scene:v,renderer:C,axesHelper:w,cameraOrbit:f,orbitControl:y,windowSizes:A,clock:O,textureLoader:x}}},447:function(e,n,t){"use strict";t.d(n,"a",(function(){return o})),t.d(n,"b",(function(){return l})),t.d(n,"c",(function(){return d}));var o,r=t(3),c=t(443);function l(e,n){var t,l=n.type,d=void 0===l?o.ambient:l,m=n.color,h=void 0===m?16777215:m,v=n.intensity,w=void 0===v?.3:v,f=n.position3,x=void 0===f?new c.Kb(0,0,0):f,C=(t={},Object(r.a)(t,o.ambient,(function(){return new c.b(h,w)})),Object(r.a)(t,o.directional,(function(){return new c.v(h,w)})),Object(r.a)(t,o.point,(function(){return new c.mb(h,w)})),t)[d||o.ambient]();return C.position.set(x.x,x.y,x.z),e.add(C),C}!function(e){e[e.ambient=0]="ambient",e[e.directional=1]="directional",e[e.point=2]="point"}(o||(o={}));t(9);function d(e){var n=e.scene,t=e.renderer,o=e.recieveMesh,r=e.castMeshs,l=e.light,d=e.isUseCameraHelper;t.shadowMap.enabled=!0,t.shadowMap.type=c.jb,o&&(o.receiveShadow=!0),r.forEach((function(e){"Group"===e.type?e.children.forEach((function(e){e.castShadow=!0,e.receiveShadow=!0})):e.castShadow=!0})),l.castShadow=!0,l.shadow.mapSize.width=1024,l.shadow.mapSize.height=1024,l.shadow.camera.near=1,l.shadow.camera.far=60,"OrthographicCamera"===l.shadow.camera.type&&(l.shadow.camera.top=10,l.shadow.camera.right=10,l.shadow.camera.bottom=-10,l.shadow.camera.left=-10),l.shadow.normalBias=.05;var m=null;d&&((m=new c.o(l.shadow.camera)).visible=!0,n.add(m));return{toggleVisiblePointLightCameraHelper:function(){m&&(m.visible=!m.visible)}}}},460:function(e,n,t){"use strict";t.d(n,"a",(function(){return o})),t.d(n,"b",(function(){return m}));var o,r=t(3),c=(t(19),t(443)),l=t(464),d=t(465);t(9),t(31),t(159),t(27),t(30);function m(e){var n,t=e.loaderType,m=void 0===t?o.DEFAULT:t,h=e.targetModelPath,v=void 0===h?"":h,w=e.successCallback,f=void 0===w?function(){}:w;(n={},Object(r.a)(n,o.DEFAULT,(function(){return new Promise((function(e){e(new l.a)}))})),Object(r.a)(n,o.DRACO,(function(){return new Promise((function(e){var n=new d.a,t=document.location.origin;n.setDecoderPath("".concat(t,"/threejs/draco/"));var o=new l.a;o.setDRACOLoader(n),e(o)}))})),Object(r.a)(n,o.BINARY,(function(){return new Promise((function(e){return e(!1)}))})),Object(r.a)(n,o.EMBEDDED,(function(){return new Promise((function(e){return e(!1)}))})),n)[m]().then((function(e){e.load(v,(function(e){console.log("model load success",e);var n=null,t=null;e.animations.length>0&&(t=function(e){var n=e.mixer,t=e.animations,o={},c=[];t.forEach((function(e){var t=e.name;Object.assign(o,Object(r.a)({},t,(function(){c.forEach((function(data){data.name!==t&&data.action.stop()}));var o=null;c.every((function(a){return a.name!==t}))&&(o=n.clipAction(e),c.push({name:t,action:o}));var r=c.find((function(a){return a.name===t}));r&&r.action.play()})))})),Object.assign(o,{stop:function(){c.forEach((function(data){data.action.stop()}))}});var l=function(e){var n=t.reduce((function(a,e){return a.concat([e.name])}),[])[Number(e.key)-1];(o[n]||o.stop)()};return window.addEventListener("keydown",l),{invokeClipAction:o,destroyClipEvent:function(){window.removeEventListener("keydown",l)}}}({mixer:n=new c.d(e.scene),animations:e.animations})),f({gltf:e,animationMixer:n,changeAnimation:t})}))}))}!function(e){e.DEFAULT="glTF",e.DRACO="Draco",e.BINARY="Binary",e.EMBEDDED="Embedded"}(o||(o={}))},466:function(e,n,t){var content=t(490);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(21).default)("787c5c62",content,!0,{sourceMap:!1})},489:function(e,n,t){"use strict";t(466)},490:function(e,n,t){var o=t(20)(!1);o.push([e.i,".animate-model-import-container[data-v-2e2a5040]{height:100%}.animate-model-import-container .col-controls[data-v-2e2a5040]{flex-grow:unset}.animate-model-import-container .col-controls .animation-change-box>div[data-v-2e2a5040]{width:50px;height:50px;margin-bottom:10px;word-break:break-all;padding:5px;font-size:12px;text-align:center}.animate-model-import-container .col-controls .animation-change-box>div[data-v-2e2a5040]:hover{cursor:pointer}.animate-model-import-container .col-controls .animation-change-box__survey[data-v-2e2a5040]{background-color:#00f}.animate-model-import-container .col-controls .animation-change-box__walk[data-v-2e2a5040]{background-color:green}.animate-model-import-container .col-controls .animation-change-box__run[data-v-2e2a5040]{background-color:orange}.animate-model-import-container .col-controls .animation-change-box__stop[data-v-2e2a5040]{background-color:red}.animate-model-import-container .col-canvas[data-v-2e2a5040]{flex-grow:inherit;position:relative}",""]),e.exports=o},547:function(e,n,t){"use strict";t.r(n);t(27),t(31);var o=t(2),r=t(443),c=t(445),l=t(447),d=t(460),m=Object(o.d)({setup:function(e,n){var t=Object(c.a)({context:n,isOrbitControl:!0});return{setCanvas:t.setCanvas,registerRenderTickCanvas:t.registerRenderTickCanvas,gui:t.gui,scene:t.scene,renderer:t.renderer,axesHelper:t.axesHelper,cameraOrbit:t.cameraOrbit,orbitControl:t.orbitControl,windowSizes:t.windowSizes,clock:t.clock}},data:function(){return{idAnimationFrame:null,prevTime:0,selectorCanvasWrap:"animate-model-import",guiParams:{},ambientLight:null,basePlane:null,iGLTF:null,iAnimationMixer:null,changeAnimation:null}},head:function(){return{title:"Animate Model Import",meta:[{hid:"description",name:"description",content:"Animate model import, change model animation,  model import composables"}]}},watch:{guiParams:{deep:!0,handler:function(e){var n=e.intensityAmbientLight,t=e.scalePlane,o=e.scaleFox;n&&(this.ambientLight.intensity=n),t&&this.basePlane.scale.set(t,t,1),this.iGLTF&&o&&this.iGLTF.scene.scale.set(o,o,o)}}},mounted:function(){var e=this;this.setCanvas({vm:this}),this.registerRenderTickCanvas((function(){e.initUtils(),e.setStyleDatGui(),e.tick()}))},beforeDestroy:function(){window.cancelAnimationFrame(this.idAnimationFrame),document.querySelector(this.gui.parentSelector).appendChild(this.gui.domElement),this.gui.destroy(),this.changeAnimation.destroyClipEvent()},methods:{initUtils:function(){var e=this;this.guiParams=Object.assign({intensityAmbientLight:.7,scalePlane:3,scaleFox:.1,timeSpeed:2},{}),this.gui.add(this.guiParams,"intensityAmbientLight").min(0).max(1).step(.01),this.gui.add(this.guiParams,"scalePlane").min(1).max(10).step(1),this.gui.add(this.guiParams,"scaleFox").min(.01).max(.5).step(.001),this.gui.add(this.guiParams,"timeSpeed").min(1).max(10).step(.1),this.ambientLight=Object(l.b)(this.scene,{type:l.a.ambient,intensity:this.guiParams.intensityAmbientLight});this.basePlane=this.makeBasePlane(30),this.scene.add(this.basePlane),Object(d.b)({loaderType:d.a.DEFAULT,targetModelPath:"/threejs/models/Fox/glTF/Fox.gltf",successCallback:function(n){var t=n.gltf,o=n.animationMixer,r=n.changeAnimation;e.iGLTF=t,e.iAnimationMixer=o,e.changeAnimation=r;var c=e.guiParams.scaleFox;t.scene.scale.set(c,c,c),t.scene.rotateY(Math.PI/4),e.scene.add(t.scene)}}),this.cameraOrbit.position.set(0,5,20)},tick:function(){var e=this.clock.getElapsedTime(),n=e-this.prevTime;this.prevTime=e,this.orbitControl.update(),this.iAnimationMixer&&this.iAnimationMixer.update(n*this.guiParams.timeSpeed),this.renderer.render(this.scene,this.cameraOrbit),this.idAnimationFrame=window.requestAnimationFrame(this.tick)},setStyleDatGui:function(){this.gui.domElement.style.cssText+="position: absolute; right: 0px; top: 0px;",this.$el.querySelector(".".concat(this.selectorCanvasWrap)).appendChild(this.gui.domElement)},makeBasePlane:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=10,t=new r.lb(e,e,n,n),o=new r.ab({roughness:.7,color:16776960,wireframe:!0}),c=new r.X(t,o);return c.rotation.x=.5*-Math.PI,c.position.y=0,c},clickAniBtn:function(e){var n=this.iGLTF.animations.reduce((function(a,e){return a.concat([e.name])}),[])[e-1];(this.changeAnimation.invokeClipAction[n]||this.changeAnimation.invokeClipAction.stop)()}}}),h=(t(489),t(46)),v=t(58),w=t.n(v),f=t(454),x=t(453),component=Object(h.a)(m,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-row",{class:e.selectorCanvasWrap+"-container"},[t("v-col",{staticClass:"col-controls"},[t("div",{staticClass:"animation-change-box"},e._l(["survey","walk","run","stop"],(function(n,o){return t("div",{key:n+"_"+o,class:"animation-change-box__"+n,on:{click:function(n){return e.clickAniBtn(o+1)}}},[e._v("\n        run ani "+e._s(n)+"\n      ")])})),0)]),e._v(" "),t("v-col",{staticClass:"col-canvas",class:e.selectorCanvasWrap},[t("canvas",{staticClass:"webgl"})])],1)}),[],!1,null,"2e2a5040",null);n.default=component.exports;w()(component,{VCol:f.a,VRow:x.a})}}]);